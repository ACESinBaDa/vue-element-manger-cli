webpackJsonp([4],{"+rhx":function(e,n){},0:function(e,n,t){t("j1ja"),e.exports=t("NHnr")},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("lRwf"),r=t.n(o),s={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var a=t("VU/8")({name:"App"},s,!1,function(e){t("lFHn")},null,null).exports,u=t("Gu7T"),i=t.n(u),c=t("pRNm"),f=t.n(c),p=[{path:"/login",component:function(){return t.e(0).then(t.bind(null,"QlWu"))},name:"login",meta:{title:"登录"}}],l=[{path:"other/notice",component:function(){return t.e(2).then(t.bind(null,"cCWh"))},name:"notice",meta:{title:"发布公告"}}],d=[{path:"/",component:function(){return t.e(1).then(t.bind(null,"nU8l"))},name:"home",children:[].concat([{path:"/home",redirect:{name:"notice"}}],i()(l))}];r.a.use(f.a);var m=new f.a({routes:[].concat([{path:"/",redirect:"login"}],i()(p),i()(d)),mode:"history"});m.beforeEach(function(e,n,t){e.meta.title||e.params.message?document.title=e.meta.title||e.params.message.title:document.title="后台管理系统",t()});var _=m,h=t("SJI6"),g=t.n(h),I=t("MfZv"),T=t.n(I),E={state:{sidebar:T.a.session.get("__sidebar__")},mutations:{SET_SIDEBAR:function(e,n){e.sidebar=n}},actions:{setSidebar:function(e,n){(0,e.commit)("SET_SIDEBAR",T.a.session.set("__sidebar__",n))}}},k={state:{userInfo:T.a.session.get("__userInfo__"),userToken:T.a.session.get("__userToken__")},mutations:{SET_USERINFO:function(e,n){e.userInfo=n},SET_USERTOKEN:function(e,n){e.userToken=n}},actions:{setUserInfo:function(e,n){(0,e.commit)("SET_USERINFO",T.a.session.set("__userInfo__",n))},setUserToken:function(e,n){(0,e.commit)("SET_USERTOKEN",T.a.session.set("__userToken__",n))}}},R={sidebar:function(e){return e.app.sidebar},userInfo:function(e){return e.user.userInfo},userToken:function(e){return e.user.userToken}};r.a.use(g.a);var x=new g.a.Store({modules:{app:E,user:k},getters:R}),v=t("//Fk"),S=t.n(v),b=t("OMN4"),w=t.n(b),N=t("l6IN"),O=t.n(N);w.a.defaults.timeout=4e4;var U=void 0,M=0,j=["login","reg","forget"];w.a.interceptors.request.use(function(e){return console.log("production"),e.url="/api"+e.url,e.isFormdata&&(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.transformRequest=[function(e){var n="";for(var t in e)n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&";return n}]),x.state.userInfo&&(e.headers.accesstoken=x.state.userToken,e.headers.userAccountId=x.state.userInfo.sellerAccountId),j.indexOf(_.currentRoute.name)<0&&(U=N.Loading.service({fullscreen:!0})),e},function(e){return S.a.reject(e)}),w.a.interceptors.response.use(function(e){return e.config.headers.accesstoken!==e.headers.accesstoken&&e.headers.accesstoken&&x.dispatch("setUserToken",e.headers.accesstoken),j.indexOf(_.currentRoute.name)<0&&U.close(),"200"!==e.data.code&&O.a.Message({message:e.data.message,type:"warning"}),e},function(e){if(console.error(e),j.indexOf(_.currentRoute.name)<0&&U.close(),e.response){switch(e.response.status){case 403:if(0===M){M+=1,O.a.MessageBox.confirm("您还未登录, 请先登录","提示",{type:"error",showCancelButton:!1,closeOnClickModal:!1}).then(function(){_.replace({name:"login"}),M=0}).catch(function(e){console.error(e)});break}return!1;default:O.a.Message({message:"网络错误，请稍后再试！",type:"warning"})}return!1}return S.a.reject(e.response.data)});var y=w.a;t("j1ja"),t("+rhx");r.a.config.productionTip=!1,r.a.prototype.$axios=y,new r.a({el:"#app",router:_,store:x,components:{App:a},template:"<App/>"})},OMN4:function(e,n){e.exports=axios},SJI6:function(e,n){e.exports=Vuex},l6IN:function(e,n){e.exports=ELEMENT},lFHn:function(e,n){},lRwf:function(e,n){e.exports=Vue},pRNm:function(e,n){e.exports=VueRouter}},[0]);
//# sourceMappingURL=app.8022ac42dd273e1ca931.js.map